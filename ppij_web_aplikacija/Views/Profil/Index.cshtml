@model ppij_web_aplikacija.Models.PostavkeModel
<!DOCTYPE html>
<html>
    <head>
        <title>@ViewBag.Title</title>
        <script type ="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="tabbable" role="tablist">

                <ul class="nav nav-tabs" id="myTab" >
                    <li role="presentation" class="active"><a href="#tab1" aria-controls="tab1" role="tab" data-toggle="tab">Moje instrukcije</a></li>
                    <li role="presentation"><a href="#tab3" aria-controls="tab3" role="tab" data-toggle="tab">Postavke profila</a></li>
                    <li role="presentation"><a href="#tab2" aria-controls="tab2" role="tab" data-toggle="tab">Promjena lozinke</a></li>
                </ul>

                <div class="tab-content">




                    <div class="tab-pane active top-buffer" role="tabpanel" id="tab1">
                        @if (@ViewBag.razinaPrava == 1)
                        {
                            <h4>Popis Kategorija</h4>
                            <ul>
                                @foreach (var kategorija in ViewBag.kategorije)
                                {
                                    <li>
                                        @kategorija.naziv_kategorija @kategorija.kratica_kategorija
                                    </li>
                                }
                            </ul>
                            <h4>Popis termina</h4>
                            <div id="table" style="width:800px;">
                                <!--tablica sa terminima-->
                            </div>


                        }
                        else if (@ViewBag.razinaPrava == 2)
                        {
                            <p>Ukoliko želite biti instruktor odaberite opciju "Želim biti instruktor" u Postavkama profila</p>
                        }
                        else if (@ViewBag.razinaPrava == 0)
                        {
                            
                        }
                    </div>




                    <div class="tab-pane" role="tabpanel" id="tab2">
                        <h3>Promjena lozinke</h3>
                        @using (Html.BeginForm())
                        {
                            @Html.ValidationSummary(true)
                            <fieldset>
                                <form class="form-horizontal " method="post">

                                    <div class="form-group">
                                        <label class="col-md-3 control-label" for="promjena_lozinke_stara">
                                            <mark>Stara lozinka</mark>
                                        </label>
                                        <div id="promjena_lozinke_stara" class="col-md-5">
                                            @Html.EditorFor(model => model.changePassword.OldPassword)
                                            @Html.ValidationMessageFor(model => model.changePassword.OldPassword)
                                            @Html.ValidationMessage("error_old_password")
                                        </div>
                                    </div>
                                    <br />

                                    <div class=" form-group">
                                        <label class="col-md-3 control-label" for="promjena_lozinke_nova">
                                            <mark>Nova lozinka</mark>
                                        </label>
                                        <div id="promjena_lozinke_nova" class="col-md-6">
                                            @Html.PasswordFor(model => model.changePassword.NewPassword)
                                            @Html.ValidationMessageFor(model => model.changePassword.NewPassword)
                                            @Html.ValidationMessage("error_loz")
                                        </div>
                                    </div>
                                    <br />

                                    <div class="form-group">
                                        <label class="col-md-3 control-label" for="promjena_lozinke_ponovljena">
                                            <mark>Ponovljena nova lozinka</mark>
                                        </label>
                                        <div id="promjena_lozinke_ponovljena" class="col-md-6">
                                            @Html.PasswordFor(model => model.changePassword.ConfirmPassword)
                                            @Html.ValidationMessageFor(model => model.changePassword.ConfirmPassword)
                                            @Html.ValidationMessage("error_loz")
                                        </div>
                                    </div>
                                    <br />

                                    
                                    <div class="col-md-2 mali-razmak-gore">
                                        <input onclick="addindex();" type="submit" class="btn btn-default" value="Promjeni &raquo;" /> <br />
                                    </div>


                                    <div id="tekst1" class="hidden">
                                        @Html.EditorFor(model => model.trenutniTab)
                                    </div>

                                </form>
                            </fieldset>
                        }
                    </div>





                    <div class="tab-pane top-buffer" role="tabpanel" id="tab3">
                        <h3>Postavke profila</h3>
                        @using (Html.BeginForm())
                        {

                            <fieldset >
                                <form class="form-horizontal " method="post">
                                    
                                    <div class="row">
                                        <label class="col-md-3 control-label" for="jeinstruktor">
                                            <mark>Želim biti instruktor</mark>
                                        </label>
                                        <div id="jeinstruktor" class="col-md-6">
                                            @Html.CheckBoxFor(model => model.ostalePostavke.instruktor)
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-2 mali-razmak-gore">
                                            <input onclick="addindex();" type="submit" class="btn btn-default" value="Promjeni &raquo;" /> <br />
                                        </div>
                                    </div>

                                    <div id="tekst2" class="hidden" >
                                        @Html.EditorFor(model => model.trenutniTab)
                                    </div>

                                </form>
                            </fieldset>
                        }
                    </div>



                </div>


                @if (@Html.ViewData.ModelState.IsValid == false)
                {
                    <script type="text/javascript">
                        $(document).ready(function () {
                            activaTab('tab2');
                        });
                        function activaTab(tab) {
                            //document.getElementById("tekst").innerHTML = "ViewData Modelstate not valid: " + tab.toString();
                            $('#myTab a[href="#' + tab + '"]').tab('show');
                        };
                    </script>
                }


                <script>
                    function addindex(){
                        $('#trenutniTab').val(getIndex());
                    }

                    function getIndex() {
                        var index = ($('#myTab .active')).index();
                        return index;
                    }


                    jQuery(document).ready(function () {
                        var rows = " ";
                        var col = " ";
                        var table = '<table class="table-bordered table table-striped header-fixed"> <thead><tr><th>sat  </th><th>PON</th><th>UTO</th><th>SRI</th><th>ČET</th><th>PET</th><th>SUB</th><th>NED</th></tr> </thead><tbody>';
                        for(var i = 0; i <= 23; i++){
                            rows = rows + '<tr><td><div class="redrazmak">'+i+'h    '+'</div></td>';
                            col = " ";
                            for (var j = 1; j <= 7; j++) {
                                col = col + '<td><div class="redrazmak ">'
                                    + '<input id="d' + j + '' + i + '" type="checkbox" name="d' + j + '' + i + '" onclick="changeText(this.id);"/>'
                                        + '<label for="d' + j + '' + i + '">'
                                            + 'Slobodno'
                                        + '</label>'
                                    + '</div></td>';
                            }
                            rows = rows + col;
                            rows = rows + '</tr>';
                        }
                        table = table + rows + '</tbody></table>';
                        document.getElementById("table").innerHTML = table;
                    });

                    function changeText(id) {

                        if ($('#' + id).is(':checked')) {
                            $('#' + id).siblings('label').html('Zauzeto');
                        } else {
                            $('#' + id).siblings('label').html('Slobodno');
                        }
                    }
                </script>

                <!--'<input id="d' + j + '' + i + '" type="checkbox" name="lists" /><label for="lists">Travel</label>'  '<button class="btn-default" >Gumb</button>'-->
                

            </div>
        </div>
</body>
</html>
